name: Compile LaTeX Document

on:
  push:
    branches:
      - main  # Change if you're using another branch

jobs:
  build_latex:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Compile LaTeX
        uses: xu-cheng/latex-action@v2
        with:
          root_file: main.tex  # Change to your main LaTeX file
          latexmk_use_xelatex: true  # Use XeLaTeX; modify if needed

      - name: Upload PDF to Artifacts
        uses: actions/upload-artifact@v3
        with:
          name: compiled-pdf
          path: main.pdf  # Change if your output is named differently

      - name: Commit and Push PDF
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add main.pdf
          git commit -m "Auto-compile and update PDF"
          git push
